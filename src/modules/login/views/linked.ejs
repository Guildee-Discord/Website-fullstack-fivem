<!doctype html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title><%= config?.name || "Undefined" %></title>
  <% if (websiteLogo) { %>
  <link rel="icon" type="image/png" href="<%= websiteLogo %>">
  <meta property="og:image" content="<%= websiteLogo %>">
  <meta name="twitter:image" content="<%= websiteLogo %>">
  <% } %>
  <script src="https://cdn.tailwindcss.com"></script>
  <%- include(coreView("partials/icons/font-awesome")) %>
  <%- include(coreView("partials/toast/toast")) %>
  <%- include(coreView("partials/theme/theme")) %>
  <%- include(coreView("partials/interval/interval-home")) %>
</head>

<body class="bg-black text-white">
  <div class="animated-bg"></div>
  <div class="grid-overlay"></div>
  <div class="scanlines"></div>
  <%- include(coreView("partials/navbar/navbar")) %>

  <section id="link" class="relative pt-28 pb-16 min-h-[calc(100vh-7rem)] flex items-center">
    <div class="max-w-5xl w-full mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <div class="cyber-card rounded-2xl p-6 sm:p-10">
        <div class="flex items-center gap-4 mb-6">
          <div
            class="w-12 h-12 rounded-xl border-2 border-[<%= config.color %>]/40 bg-black/40 flex items-center justify-center overflow-hidden">
            <% if (user.avatarURL()) { %>
            <img src="<%= user.avatarURL() %>" alt="Avatar" class="w-full h-full object-cover">
            <% } else { %>
            <span class="text-lg font-black text-[<%= config.color %>]">
              <%= (user?.username || user?.name || 'U').charAt(0).toUpperCase() %>
            </span>
            <% } %>
          </div>

          <div class="min-w-0">
            <h2 class="text-2xl sm:text-3xl font-black logo-text cyber-text"><%= t("linked.var1") %></h2>
            <p class="text-gray-400 text-sm sm:text-base">
              <%= t("linked.var2") %> <span class="text-white font-bold"><%= user.username %></span>
            </p>
          </div>
        </div>

        <% if (typeof error !== "undefined" && error) { %>
        <div class="mb-5 p-4 rounded-xl border border-red-500/30 bg-red-500/10 text-red-200 text-sm">
          <i class="fa-solid fa-triangle-exclamation mr-2"></i><%= error %>
        </div>
        <% } %>

        <% if (typeof success !== "undefined" && success) { %>
        <div class="mb-5 p-4 rounded-xl border border-green-500/30 bg-green-500/10 text-green-200 text-sm">
          <i class="fa-solid fa-circle-check mr-2"></i><%= success %>
        </div>
        <% } %>

        <div class="glow-line mb-6"></div>

        <form method="POST" action="/connexion/linked" class="space-y-5">
          <div>
            <label for="fivem_id"
              class="flex items-center justify-between text-sm font-bold uppercase tracking-wider text-white/80 mb-2">
              <span><%= t("linked.var3") %></span>
              <button type="button" id="help-toggle" class="text-[<%= config.color %>] text-xs flex items-center gap-1">
                <i class="fa-solid fa-circle-question"></i>
                <span><%= t("linked.var4") %></span>
              </button>
            </label>

            <input id="fivem_id" name="fivem_id" type="text" required autocomplete="off"
              placeholder="<%= t("linked.var5") %>"
              class="w-full px-4 py-4 rounded-xl bg-black/40 border border-[<%= config.color %>]/25 focus:outline-none focus:ring-2 focus:ring-[<%= config.color %>]/40 focus:border-[<%= config.color %>]/60 text-white placeholder:text-gray-500" />

            <!-- HELP BOX AGRANDIE -->
            <div id="help-box"
              class="hidden mt-4 p-5 rounded-xl border border-amber-500/30 bg-amber-500/10 text-amber-200 text-sm leading-relaxed space-y-2">
              <p>
                <i class="fa-solid fa-circle-info mr-1"></i>
                <%- t("linked.var6") %>
              </p>
              <p>
                <%- t("linked.var7") %>
                <code class="text-amber-300 text-sm"><%- t("linked.var8") %></code>,
                <code class="text-amber-300 text-sm"><%- t("linked.var9") %></code>
              </p>
              <p class="text-amber-300/80">
                <%- t("linked.var10") %>
              </p>
            </div>
          </div>

          <button type="submit"
            class="cyber-btn w-full px-8 py-4 rounded-xl inline-flex items-center justify-center gap-2">
            <i class="fa-solid fa-link"></i>
            <span><%- t("linked.var11") %></span>
          </button>
        </form>
      </div>
    </div>
  </section>

  <script>
    const helpToggle = document.getElementById("help-toggle");
    const helpBox = document.getElementById("help-box");

    if (helpToggle && helpBox) {
      helpToggle.addEventListener("click", () => {
        helpBox.classList.toggle("hidden");
      });
    }
  </script>
</body>

</html>
